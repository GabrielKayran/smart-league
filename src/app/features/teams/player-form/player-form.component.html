<div class="player-form-container">
	<mat-card class="form-card">
		<mat-card-header>
			<mat-card-title>
				<mat-icon>person_add</mat-icon>
				Cadastrar Novo Jogador
			</mat-card-title>
			<mat-card-subtitle>
				Preencha as informações do jogador
			</mat-card-subtitle>
		</mat-card-header>

		<mat-card-content>
			<form [formGroup]="playerForm" (ngSubmit)="onSubmit()" class="player-form">
				<div class="form-row">
					<mat-form-field appearance="outline">
						<mat-label>Nome do Jogador</mat-label>
						<input matInput formControlName="name" placeholder="Ex: Gabriel Barbosa" required>
						@if (playerForm.get('name')?.hasError('required') && playerForm.get('name')?.touched) {
						<mat-error>Nome do jogador é obrigatório</mat-error>
						}
					</mat-form-field>

					<mat-form-field appearance="outline">
						<mat-label>Idade</mat-label>
						<input matInput type="number" formControlName="age" placeholder="Ex: 25" required>
						@if (playerForm.get('age')?.hasError('required') && playerForm.get('age')?.touched) {
						<mat-error>Idade é obrigatória</mat-error>
						}
						@if (playerForm.get('age')?.hasError('min') && playerForm.get('age')?.touched) {
						<mat-error>Idade mínima é 16 anos</mat-error>
						}
						@if (playerForm.get('age')?.hasError('max') && playerForm.get('age')?.touched) {
						<mat-error>Idade máxima é 50 anos</mat-error>
						}
					</mat-form-field>
				</div>

				<div class="form-row">
					<mat-form-field appearance="outline">
						<mat-label>Time</mat-label>
						<mat-select formControlName="teamId" required>
							@for (team of teams; track team.id) {
							<mat-option [value]="team.id">{{ team.name }}</mat-option>
							}
						</mat-select>
						@if (playerForm.get('teamId')?.hasError('required') && playerForm.get('teamId')?.touched) {
						<mat-error>Selecione um time</mat-error>
						}
					</mat-form-field>

					<mat-form-field appearance="outline">
						<mat-label>Posição</mat-label>
						<mat-select formControlName="position" required>
							@for (position of positions; track position.value) {
							<mat-option [value]="position.value">{{ position.label }}</mat-option>
							}
						</mat-select>
						@if (playerForm.get('position')?.hasError('required') && playerForm.get('position')?.touched) {
						<mat-error>Selecione uma posição</mat-error>
						}
					</mat-form-field>
				</div>

				<div class="form-row">
					<mat-form-field appearance="outline">
						<mat-label>Número da Camisa</mat-label>
						<input matInput type="number" formControlName="number" placeholder="Ex: 9" required>
						@if (playerForm.get('number')?.hasError('required') && playerForm.get('number')?.touched) {
						<mat-error>Número da camisa é obrigatório</mat-error>
						}
						@if (playerForm.get('number')?.hasError('min') && playerForm.get('number')?.touched) {
						<mat-error>Número deve ser entre 1 e 99</mat-error>
						}
						@if (playerForm.get('number')?.hasError('max') && playerForm.get('number')?.touched) {
						<mat-error>Número deve ser entre 1 e 99</mat-error>
						}
					</mat-form-field>

					<mat-form-field appearance="outline">
						<mat-label>Foto do Jogador (URL)</mat-label>
						<input matInput formControlName="photo" placeholder="https://exemplo.com/foto.jpg" type="url">
						<mat-icon matSuffix>image</mat-icon>
						@if (playerForm.get('photo')?.hasError('pattern') && playerForm.get('photo')?.touched) {
						<mat-error>URL inválida</mat-error>
						}
					</mat-form-field>
				</div>
			</form>
		</mat-card-content>

		<mat-card-actions align="end">
			<button mat-button type="button" (click)="onCancel()">
				Cancelar
			</button>
			<button mat-raised-button color="primary" type="submit" (click)="onSubmit()"
				[disabled]="playerForm.invalid || isSubmitting">
				@if (isSubmitting) {
				<ng-container>
					<mat-icon>hourglass_empty</mat-icon>
					Salvando...
				</ng-container>
				} @else {
				<ng-container>
					<mat-icon>save</mat-icon>
					Salvar Jogador
				</ng-container>
				}
			</button>
		</mat-card-actions>
	</mat-card>
</div>